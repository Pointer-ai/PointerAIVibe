# 📚 Pointer.ai
> 零后端 · React 19 · Vite 5 · Pyodide · Tailwind  
> **由 AI & 人类协作开发** – 本 README 是唯一真理源。

## 1. 项目使命
打造一个纯前端的智能编程教育平台，通过 AI 驱动的个性化学习路径，帮助学习者从零基础到独立开发者的成长之旅。无需服务器，所有数据本地存储，支持离线学习。

演示地址：[https://pointer-ai.github.io/PointerAIVibe/](https://pointer-ai.github.io/PointerAIVibe/)

## 2. 功能模块概览
| 模块 | 状态 | 负责人 | 覆盖率 | 简述 |
|------|------|--------|-------|------|
| profile       | ✅ 已完成 | @ai | 100% | 多 Profile 管理，支持密码保护 |
| landingPage   | ✅ 已完成 | @ai | 100% | 苹果风格首页，展示产品特性 |
| dashboard     | ✅ 已完成 | @ai | 100% | 登录后主界面，功能模块入口 |
| profileSettings | ✅ 已完成 | @ai | 95%  | API 配置、模型选择、参数调节、活动记录 |
| abilityAssess | ✅ 已完成 | @ai | 95%  | PDF/文本简历分析、置信度评估、多维度能力评分 |
| aiAssistant   | ✅ 已完成 | @ai | 90%  | 全局悬浮AI助手，智能关键词识别，上下文对话 |
| goalSetting   | 🚧 开发中 | @ai | 5%   | 基础框架已建立，核心功能待实现 |
| pathPlan      | 🚧 开发中 | @ai | 5%   | 基础框架已建立，核心功能待实现 |
| courseContent | 🚧 开发中 | @ai | 5%   | 基础框架已建立，核心功能待实现 |
| codeRunner    | ✅ 已完成 | @ai | 95%  | Monaco Editor + 多语言支持(Python/C++/JavaScript)，WASM运行环境 |

> 状态：✅ 已完成｜🚧 开发中｜⏳ 待开发

## 3. 快速开始
```bash
# 安装依赖
pnpm i

# 本地开发
pnpm dev      # 启动开发服务器 http://localhost:5173

# 构建部署
pnpm build    # 生成 dist/ 目录

# 运行测试
pnpm test     # Vitest 单元测试
pnpm test:ui  # 可视化测试界面
```

## 4. 开发规范
1. **代码规范**
   - 文件 ≤ 200 行；函数式组件 + TypeScript
   - 禁止使用 any 类型
   - 所有模块独立目录，便于小上下文 AI 迭代
   
2. **注释规范**
   - 注释写 **为什么**，不要写 **做什么**
   - 复杂逻辑必须有中文注释说明
   
3. **日志规范**
   - 统一使用 `logger.ts`：`log('[模块名] 消息')`
   - 错误使用 `error()`，警告使用 `warn()`
   
4. **存储规范**
   - 持久化统一使用 `storage.ts` API
   - 不直接操作 localStorage

## 5. 测试策略
| 层级 | 工具 | 覆盖目标 |
|------|------|----------|
| 单元   | Vitest + RTL     | 纯函数 / hooks / 组件渲染 |
| 集成   | Cypress Component| 模块交互、Pyodide 初始化 |
| 端到端 | Playwright       | 用户从评估到运行代码完整流程 |

## 6. 本地数据接口
```typescript
interface Profile {
  id: string
  name: string
  hasPassword: boolean
  passwordHash?: string
  createdAt: string
  lastLogin?: string
  avatar?: string
  data: Record<string, any>  // 该 profile 的所有数据
}

interface LocalState {
  profile: UserProfile | null     // 用户能力档案
  goal: string | null            // 学习目标
  path: LearningStep[]           // 学习路径
  lessons: Record<string, Lesson> // 课程内容
  apiConfig: {                   // AI 配置
    model: 'claude' | 'openai' | 'qwen'
    key: string
  }
}
```

## 7. 模块 TODO

### profile ✅
- [x] 设计 Profile 管理界面
- [x] 实现创建、选择、删除 Profile
- [x] 支持密码保护（可选）
- [x] localStorage 存储方案
- [x] Profile 切换功能

### landingPage ✅
- [x] 苹果风格设计
- [x] AI Native 标识展示
- [x] 产品特性介绍
- [x] 目标用户说明
- [x] CTA 按钮引导
- [x] 苹果风格 Profile 切换器（支持头像悬停缩放动画）
- [x] 登录状态下的 Profile 切换功能
- [x] 退出登录功能集成
- [x] 多 Profile 快速切换下拉菜单
- [x] 密码保护状态显示
- [x] 在线状态指示器
- [x] 点击外部关闭下拉菜单
- [x] 与 Dashboard 跳转集成
- [x] 密码保护 Profile 切换验证（弹窗输入密码）

### dashboard ✅
- [x] 登录后主界面
- [x] 功能模块展示
- [x] Profile 信息显示
- [x] 退出登录功能

### profileSettings
- [x] 个人信息展示和编辑（用户名、头像）
- [x] API Key 配置界面
- [x] AI 模型选择（OpenAI/Claude/通义千问）
- [x] API Key 格式验证
- [x] 活动历史记录展示
- [x] 活动记录筛选功能
- [x] 活动记录清除功能
- [x] 与 Dashboard 集成
- [x] 基于 Profile 的配置隔离
- [x] 修改密码功能（支持设置/修改/移除密码）
- [x] 支持最新 AI 模型（GPT-4o、Claude 3.5 Sonnet、Qwen Max 等）
- [x] 具体模型选择界面（支持多个版本）
- [x] 高级参数配置（temperature、maxTokens、topP、topK 等）
- [x] 参数预设模板（创意/平衡/精确模式）
- [x] 参数重置到默认值功能
- [x] 不同服务商的专用参数支持（如 Claude 的 systemPrompt）
- [x] 向后兼容性处理（自动升级旧配置格式）
- [ ] 用户偏好设置（主题/语言/通知）
- [ ] 活动数据统计图表
- [ ] API 使用量统计
- [ ] 配置导入/导出功能

### abilityAssess
- [x] 多维度能力评价体系设计（5大维度，30+细分技能）
- [x] 简历文本分析功能（支持粘贴文本或上传 txt 文件）
- [x] PDF 简历解析（支持上传 PDF 文件并自动提取文本）
- [x] 技能问卷评估功能
- [x] AI 智能评分（调用用户配置的 API Key 和模型）
- [x] 支持 OpenAI/Claude/通义千问 三种 AI 服务
- [x] 置信度评估系统（区分直接证据与推理得出的评分）
- [x] 视觉置信度指示器（虚线显示低置信度分数，带推理标记）
- [x] 能力评估结果展示（雷达图、分数详情）
- [x] 评估报告生成和导出（Markdown 格式）
- [x] 30天提升计划生成
- [x] 评估历史记录
- [x] 简历示例模板
- [x] 活动记录集成
- [ ] 批量评估功能
- [ ] 评估结果对比
- [ ] 技能认证集成

### goalSetting
- [x] 创建基础模块结构
- [x] 实现基础视图组件
- [x] 添加服务层和提示词模板
- [ ] 创建目标输入界面
- [ ] 实现目标智能解析
- [ ] 生成当前能力与目标的差距分析
- [ ] 展示可视化的技能差距图表

### pathPlan
- [x] 创建基础模块结构
- [x] 实现基础视图组件
- [x] 添加服务层和提示词模板
- [ ] 根据能力和目标生成个性化路径
- [ ] 实现学习进度跟踪
- [ ] 支持路径的动态调整
- [ ] 添加里程碑和成就系统

### courseContent
- [x] 创建基础模块结构
- [x] 实现基础视图组件
- [x] 添加服务层和提示词模板
- [ ] 实现 AI 驱动的课程内容生成
- [ ] 支持 Markdown 渲染和代码高亮
- [ ] 集成交互式练习题
- [ ] 添加学习笔记功能

### codeRunner
- [x] 完成 Pyodide 的完整集成
- [x] 实现代码编辑器（支持 Tab 缩进、快捷键运行）
- [x] 支持代码运行结果展示
- [x] 实现执行历史记录
- [x] 支持实时输出显示
- [x] 错误处理和状态管理
- [x] 预置代码示例（5个不同难度）
- [x] 与 Dashboard 集成
- [x] 单元测试覆盖
- [x] **Monaco Editor 集成**：完整的 VS Code 编辑器体验
- [x] **语法高亮**：支持 Python、C++、JavaScript 语法高亮
- [x] **智能代码补全**：三种语言的智能提示和代码片段
- [x] **编辑器优化**：自动括号匹配、智能缩进、代码折叠
- [x] **快捷键支持**：Ctrl/Cmd + Enter 运行代码
- [x] **主题切换**：暗色/亮色主题支持
- [x] **性能优化**：Lazy loading、内存管理、缓存策略
- [x] **测试覆盖**：Monaco Editor 组件的完整单元测试
- [x] **多语言架构**：支持 Python、C++、JavaScript 三种语言
- [x] **C++ 在线编译**：集成 Wandbox API 实现 C++ 代码编译运行
- [x] **JavaScript 运行时**：原生 JavaScript 执行环境
- [x] **统一 Worker 管理**：多语言 Worker 架构和状态管理
- [x] **语言切换界面**：直观的语言选择器和状态指示器
- [x] **代码示例扩展**：为每种语言提供完整的示例集合
- [ ] 添加常用 Python 包的预加载（numpy、pandas 等）
- [ ] 支持代码保存和分享
- [ ] 添加更多代码示例
- [ ] 支持多文件编辑
- [ ] 代码格式化功能（Monaco Editor 内置支持）

### aiAssistant ✅
- [x] **悟语AI助手设计**：可拖拽的小僧人图标，支持自动激活/石化状态
- [x] **智能状态检测**：基于profile和API配置自动激活，实时监控状态变化
- [x] **关键词识别系统**：识别60+计算机专业术语，支持DOM遍历和正则匹配
- [x] **关键词高亮显示**：黄色背景+虚线下划线，悬停动画效果
- [x] **点击交互功能**：点击高亮词汇自动生成解释请求
- [x] **随意搜功能**：选中页面任意文字显示AI魔法查询按钮，智能文本解析
- [x] **多Tab聊天系统**：支持同时进行多个对话，最多保留10个会话记录，右侧边栏Tab管理
- [x] **智能标题生成**：基于用户第一句话自动生成对话标题
- [x] **学习进度追踪**：记录关键词查询历史、统计互动次数、提供学习建议
- [x] **AI对话界面**：现代化聊天UI，支持实时消息和加载状态
- [x] **多AI模型支持**：集成OpenAI、Claude、通义千问三大AI服务
- [x] **专业提示词**：针对计算机科学概念优化的系统提示词
- [x] **拖拽功能**：支持鼠标拖拽移动助手位置，边界检测
- [x] **视觉反馈**：状态指示器、动画效果、渐变背景
- [x] **上下文感知**：提取关键词周围文本作为解释上下文
- [x] **自动重新激活**：页面内容变化时自动重新识别关键词
- [x] **会话管理**：自动创建新对话Tab，支持关闭和切换
- [x] **基础测试覆盖**：核心组件和功能的单元测试
- [ ] 语音交互支持（Web Speech API）
- [ ] 个性化关键词库（用户自定义术语）
- [ ] 学习进度跟踪（记录查询历史和频率）
- [ ] 智能推荐相关概念
- [ ] 移动端优化（触摸手势支持）
- [ ] 多语言支持（英文术语库）
- [ ] 快捷键支持（Ctrl+H唤醒助手）
- [ ] 助手个性化设置（更换头像、主题色）

## 8. 迭代工作流规定  🚦
以下规则确保 *README + TODO* 始终是单一真理源，便于 AI 与人工协同。

### 8.1 迭代节奏
1. **拉分支**：每次开发前从 `main`

## 11. 更新日志

### v1.0.0 (最新) - 悟语觉醒
- 🧘‍♂️ **悟语AI助手重生**: 全新的禅意命名，从小狐狸进化为打坐小僧
- ✨ **随意搜革命性功能**: 彻底替代关键词高亮，支持选中页面任意文字进行AI查询
- 🎯 **智能标题生成**: 基于用户第一句话自动生成对话标题，最多20字符
- 📱 **右侧Tab管理**: 聊天界面改为右侧边栏Tab布局，更加直观
- 🔧 **代码编辑器兼容**: 修复Monaco Editor等代码编辑器中的文本选择检测
- 💫 **魔法查询按钮**: 紫粉色渐变的"随意搜"按钮，支持智能定位和边界检测
- 🎨 **UI全面优化**: 
  - 悟语助手从🦊变为🧘‍♂️，更具禅意
  - 移除复杂的关键词高亮系统
  - 简化设置面板，专注随意搜功能
  - 优化聊天界面布局和交互
- 🚀 **性能提升**: 移除DOM遍历和高亮处理，大幅提升页面性能
- 🧪 **功能聚焦**: 专注于文本选择查询，提供更纯粹的AI学习体验

### v0.9.0
- 🤖 **全局AI学习助手**: 全新的悬浮式AI对话助手，让学习更加智能化
- 🦊 **可爱小狐狸**: 可拖拽的小狐狸图标，智能激活状态（配置API后自动变彩色）
- 🔍 **智能关键词识别**: 自动识别页面中60+计算机专业术语并高亮显示
- 💬 **点击即解释**: 点击高亮关键词即可获得AI专业解释，支持上下文理解
- 🎨 **现代化UI**: 渐变背景、弹跳动画、状态指示器，视觉体验极佳
- 🧠 **多AI模型支持**: 无缝集成OpenAI、Claude、通义千问，复用用户API配置
- 🎯 **专业优化**: 针对计算机科学概念特别优化的系统提示词
- 📱 **响应式设计**: 支持拖拽移动、触摸操作、移动端适配
- 🧪 **测试覆盖**: 完整的单元测试，确保功能稳定性
- ✨ **交互优化**: 
  - 可拖拽聊天窗口，支持非模态对话
  - 智能关键词重新激活机制
  - 聊天窗口内置助手设置面板
  - 自我介绍系统引导新用户激活
  - 页面内容变化自动重新识别关键词

### v0.8.0
- 🚀 **多语言代码运行器**: 扩展支持 Python、C++、JavaScript 三种编程语言
- ⚡ **C++ 在线编译**: 集成 Wandbox API，实现前端 C++ 代码编译和运行
- 🔧 **JavaScript 运行时**: 原生 JavaScript 执行环境，支持即时运行
- 🏗️ **统一 Worker 架构**: 多语言 Worker 管理，支持 lazy loading 和状态缓存
- 🎯 **语言切换界面**: 直观的语言选择器，实时状态指示器
- 📚 **代码示例扩展**: 为每种语言提供完整的示例集合（基础到高级）
- 🎨 **编辑器增强**: Monaco Editor 多语言语法高亮和智能补全
- ⚠️ **性能说明**: 添加 C++ 前端编译性能说明和用户提示
- 🧪 **测试完善**: 多语言运行器的完整测试覆盖

### v0.7.0
- 🚀 **CodeRunner 页面升级**: 使用新的集成组件架构，提供更专业的代码编辑体验
- 🏗️ **组件化重构**: 采用 RuntimeProvider + IntegratedCodeRunner 一体化解决方案
- 🎯 **预设语言组件**: 提供 PythonRunner、JavaScriptRunner、CppRunner 便捷组件
- 🎨 **界面优化**: 改进页面布局，新增功能特性展示区域
- 📱 **示例选择器**: 重新设计的代码示例选择界面，支持难度标识
- 🔧 **状态管理**: 统一的运行时状态管理，自动初始化和缓存
- 🧪 **测试完善**: 所有 46 个测试用例通过，确保功能稳定性

### v0.6.0
- 🎨 **Monaco Editor 集成**: 升级代码编辑器为 VS Code 内核，提供专业级编程体验
- ✨ **语法高亮完善**: 支持 Python、C++、JavaScript 完整语法高亮
- 🧠 **智能代码补全**: 三种语言的智能提示、代码片段和参数提示
- ⚡ **编辑器功能增强**: 自动括号匹配、智能缩进、代码折叠、行号显示
- 🎯 **快捷键优化**: Ctrl/Cmd + Enter 快速运行，完整的编辑器快捷键支持
- 🎨 **主题系统**: 支持暗色/亮色主题无缝切换
- 🚀 **性能优化**: Lazy loading、Worker 优化、内存管理改进
- 🧪 **测试覆盖**: 新增 14 个测试用例，确保编辑器功能稳定性
- 📚 **文档完善**: 详细的使用指南和技术文档

### v0.5.0
- 🔐 **密码验证切换**: 在首页 Profile 切换器中添加密码验证功能
- 💡 **智能切换逻辑**: 有密码保护的 Profile 弹出密码输入框，无密码保护的直接切换
- 🎨 **优雅交互设计**: 密码输入框支持显示/隐藏密码，错误提示友好
- ⚡ **即时验证**: 实时验证密码正确性，防止错误切换
- 🧪 **完整测试覆盖**: 新增 7 个测试用例，确保密码验证功能稳定性

### v0.4.0
- ✨ **苹果风格 Profile 切换器**: 新增首页登录后的 profile 切换功能
- 🎨 **头像悬停动画**: 实现苹果风格的头像缩放和阴影效果
- 🔧 **快速切换**: 支持在下拉菜单中快速切换不同 profile
- 🔐 **密码保护指示**: 显示受密码保护的 profile 状态
- 🟢 **在线状态**: 添加绿色在线状态指示器
- 🎯 **点击外部关闭**: 优化用户体验，点击外部自动关闭下拉菜单
- 🔧 **状态刷新修复**: 修复退出登录后页面状态不刷新的问题
- 🧪 **完整测试覆盖**: 新增 AppleProfileSwitcher 和 LandingPage 组件的全面单元测试

### v0.3.0
- ✨ **PDF 简历支持**: 新增 PDF 文件上传解析功能，使用 pdfjs-dist 库
- ✨ **置信度评估系统**: AI 评分现在包含置信度信息，区分直接证据与推理
- 🎨 **视觉置信度指示器**: 低置信度分数使用虚线显示，带推理标记
- 🔧 **类型系统增强**: 扩展 SkillScore 接口，支持向后兼容
- 📄 **评估报告优化**: 导出报告中标注推理得出的分数
- 🧪 **测试覆盖**: 维持 95% 测试覆盖率，确保功能稳定性